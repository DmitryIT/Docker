FROM ubuntu:16.04

RUN apt-get update -y && \
    apt-get install -y --no-install-recommends python3 wget python3-pip  default-jre scala python3-setuptools
RUN pip3 install -U pip && \
    pip3 install jupyter py4j findspark

#wget http://apache.mirror.digionline.de/spark/spark-2.2.1/spark-2.2.1-bin-hadoop2.7.tgz
WORKDIR /
COPY spark-2.2.1-bin-hadoop2.7.tgz .
RUN  tar -zxvf spark-2.2.1-bin-hadoop2.7.tgz && \
            rm spark-2.2.1-bin-hadoop2.7.tgz

RUN export SPARK_HOME='/spark-2.2.1-bin-hadoop2.7' && \
    export PATH=$SPARK_HOME:$PATH && \
    export PYTHONPATH=$SPARK_HOME/python:$PYTHONPATH && \
    export PYSPARK_DRIVER_PYTHON="jupyter" && \
    export PYSPARK_DRIVER_PYTHON_OPTS="notebook" && \
    export PYSPARK_PYTHON=python3

CMD ["bash"]

